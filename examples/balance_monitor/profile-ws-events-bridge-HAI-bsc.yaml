- name: BalanceMonitor
  type: processes.BalanceMonitor
  description: >
    HAI Bridge Balance Monitor (BSC)
  parameters:
    chain_id: 56
    network: bsc
    rpc: {{ env['BSC_RPC_URL'] }}
    balance_threshold: 100000000000000000
    decimals: 18
    severity: 0.5
    erc20_addr: 0xaA9E582e5751d703F85912903bacADdFed26484C
    erc20_balance_threshold: 100000000000000000
    erc20_decimals: 8

  inputs:
  - name: transactions
    type: sentinel.channels.ws.transactions.InboundTransactionChannel
    parameters:
      server_uri: {{ env['BSC_WS_URL'] }}
  # - name: transactions
  #   type: sentinel.channels.kafka.transactions.InboundTransactionsChannel
  #   parameters:
  #     bootstrap_servers: {{ env['KAFKA_BOOTSTRAP_SERVERS'] }}
  #     group_id: sentinel-public.transactions
  #     auto_offset_reset: latest
  #     topics: 
  #     - {{ env['KAFKA_INBOUND_TX_TOPIC_BSC'] }}

  outputs:
  - name: events
    type: sentinel.channels.http.outbound.OutboundEventsChannel
    parameters:
      endpoint: {{ env["EXTRACTOR_PUBLIC_API_ENDPOINT"] }} 
      token: {{ env['HACKEN_API_TOKEN'] }}
      chain_id: 56
      network: bsc
      metadata:
        origin: simulation
  # - name: events
  #   type: sentinel.channels.kafka.events.OutboundEventsChannel
  #   parameters:
  #     bootstrap_servers: {{ env['KAFKA_BOOTSTRAP_SERVERS'] }}
  #     topics: 
  #     - {{ env['KAFKA_OUTBOUND_EVENT_TOPIC']}}

  databases:
  - name: address
    type: sentinel.db.address.local.AddressDB
    description: >
      Monitored Addresses
    parameters:
      path: ./data/address-bridge-HAI-bsc.list 
